Serial comms:

Layer 0:
19.2K, 8 bits, No parity, 1 stop bit

Layer 1:
Device boots up with echo mode turned on (to assist with debugging
any serial connection or adaptor issues) - so any comms received will
immediately be sent back without any editing or decoding

Special chars are escaped using the DLE (0x10) char - this char will
escape the next char.

Any received char with a framing error will cause a NAK (0x15) to be sent
and that char to be ignored, along with aborting any packet rx in progres

Layer 2:
Communications is packetised.  Any data received outside of a packet
is ignored by the packet system (but in the future may be consumed by
a parallel CLI mode)

A packet is begun with a STX (0x02) char.  Then data bytes are received
into the device packet bugger until either ETX, EOT or a full buffer
occurs.

If a full buffer occurs, a NAK is immediately sent and the remainder of
the packet is ignored.

An EOT (0x04) received indicates the end of the packet, which is then passed
on to the Packet system (see below).

TODO: implement checksums:
If, instead, a ETX (0x03) is received then the last two bytes of the
packet buffer are taken to be a checksum (TODO - checksum details)
over the rest of the packet.  This checksum is calculated, compared
and if there is a mismatch then a NAK is sent and the packet is ignored.
If there is no mismatch then the checksum bytes are removed and the packet
is passed on to the Packet system.


Packet system:
as an interim, packet system is simply the old serial system in a packet:

Communications with the clock:

a command char, followed by zero to two parameters. Parameters are up
to 10 chars long and are separated by a comma or terminated with a CR


code	name		inparam	out	in		out
p	PING		0		"p"		"P"
P	PONG			0	"P"
i	GET ID/VER	0		"i"		"Ixyz"
t	GET TIME	0	1	"t"		"T123"
T	SET TIME	1		"T123"		"T123"
z	GET TZ		0	1	"z"		"zAEDT"
Z	SET TZ		1		"ZAEDT"		"ZAEDT"
o	GET TZ OFFSET	1	2	"oAEDT"		"oAEDT,123"
O	SET TZ OFFSET	2		"OAEDT,123"	"OAEDT,123"
c	GET CAL		0	1	"c"		"C123"
C	SET CAL		1		"C123"		"C123"

Future?:
Brightness
Colon Blink control
Unique serial number
Scroll message
next TZ offset is "x" at time "y"

